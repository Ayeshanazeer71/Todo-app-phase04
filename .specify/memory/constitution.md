<!-- Sync Impact Report:
- Version change: 2.0.0 → 1.0.0 (complete replacement for new project)
- Modified principles: All replaced for Kubernetes deployment project
- Added sections: New principles for containerization, orchestration, and agentic development
- Removed sections: Old principles for console app
- Templates requiring updates: ✅ updated - plan-template.md, spec-template.md, tasks-template.md
- Follow-up TODOs: None
-->
# Phase IV: Local Kubernetes Deployment Constitution

This document defines the immutable principles, constraints, and rules that all AI agents (Claude Code, Gordon, kubectl-ai, kagent, etc.) **must** follow during implementation of Phase IV: Local Kubernetes Deployment of the Cloud Native Todo Chatbot.

Violating any rule requires explicit human approval and an update to this constitution.

## Core Principles

### I. Agentic Development Only
No manual coding or direct editing of generated files. All implementation must be done via AI agents (Claude Code for planning/tasks, Gordon for Docker operations, kubectl-ai and/or kagent for Kubernetes/Helm operations). Rationale: Ensures consistent, automated, and reproducible development processes.

### II. Spec-Driven Development
All work must derive from approved specifications. Agents must reference this constitution and other spec files before generating or modifying code/infrastructure. Rationale: Maintains alignment between requirements and implementation while ensuring traceability.

### III. Local-Only Deployment
Everything runs on a local Minikube cluster. No cloud providers, no remote registries unless explicitly for learning/demo purposes. Rationale: Enables safe, isolated development and testing without external dependencies or costs.

### IV. Zero Manual Intervention Preference
Prefer AI-assisted tools (Gordon, kubectl-ai, kagent) over raw CLI commands. Fall back to standard Docker/kubectl/helm CLI only if the AI agent is unavailable. Rationale: Leverages AI capabilities for complex operations while maintaining human oversight.

### V. Containerization with Docker
All application components must be containerized using Docker. Use Docker AI Agent (Gordon) for all Docker operations (Dockerfile generation, build, run, push if needed). Each component must have its own Docker image. Rationale: Ensures consistent environments and enables reliable deployment to Kubernetes.

### VI. Kubernetes Orchestration via Minikube
Use Kubernetes via Minikube for local orchestration. All deployments must use Helm charts for packaging and deployment management. Rationale: Provides production-like environment locally with proper configuration management.

### VII. Application Component Separation
The application consists of at least two components: Frontend (web/UI for Todo Chatbot) and Backend (API/server for todo logic and chatbot functionality). Each component must be deployed as separate Kubernetes Deployments with appropriate Services. Rationale: Enables independent scaling and maintenance of application tiers.

### VIII. Helm Chart Mandatory Usage
All deployments must use Helm charts to manage Deployments, Services (ClusterIP for backend, NodePort/LoadBalancer for frontend access via Minikube), ConfigMaps/Secrets if needed, and Resource limits/requests. Rationale: Ensures consistent, versioned, and configurable deployments.

### IX. Quality & Safety Validation
Agents must validate every change: Gordon verifies images build and run locally; kubectl-ai/kagent checks pod status, logs, and cluster health after deployment. Include basic readiness/liveness probes in deployments. Rationale: Ensures deployed applications are healthy and functional.

### X. Minimal Configuration for Learning
Prefer readable, minimal configurations suitable for local development and learning. Default replica count: 1 for backend, 2 for frontend (scalable via AI agents later). Rationale: Balances functionality with educational value and resource efficiency.

## Project Structure

The codebase must maintain the existing Phase III Todo Chatbot structure while adding containerization and orchestration artifacts:
- Original application code remains unchanged (only containerized)
- Dockerfiles generated by Gordon for each component
- Helm charts created for Kubernetes deployment
- Values files for configurable deployment parameters
- No modification of Phase III application source code unless specified

## Development Workflow

Start from spec files only. Generate plan → tasks → implementation via agents. After each major step, agent must summarize what was done and suggest verification commands (e.g., `minikube service`, `kubectl get pods`). Rationale: Ensures systematic, traceable, and verifiable development process.

## Governance

This constitution governs all development of the Phase IV: Local Kubernetes Deployment. All code changes, infrastructure modifications, and deployment activities must comply with these principles. Amendments to this constitution require explicit documentation of the change, its rationale, and human approval before implementation. Versioning follows semantic versioning where major changes break compatibility with previous principles, minor changes add new principles, and patches clarify existing principles.

**Version**: 1.0.0 | **Ratified**: 2026-01-29 | **Last Amended**: 2026-01-29